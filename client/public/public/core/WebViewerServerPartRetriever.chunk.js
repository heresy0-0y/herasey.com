/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[17],{349:function(Ea,va,y){function pa(aa,ca,ia){ca.endsWith("/")||(ca+="/");ia=ia||{};var ea=ia.disableWebsockets||!1;this.JQ=ia.singleServerMode||!1;null!=ia.customQueryParameters&&Object(f.b)("wvsQueryParameters",ia.customQueryParameters);ca.endsWith("blackbox/")||(ca+="blackbox/");this.El=ia.uploadData||null;this.Au=ia.uriData||null;this.ZJ=ia.cacheKey||null;this.WN=ia.officeLocale||null;this.Mr=Object(n.a)(ca,null,ea);this.se=
ca;this.uC=aa;this.Ge=null;this.ui=ja();this.Kk=ja();this.Kw=!1;this.sf=this.ld=this.Ad=this.re=null;this.Ke=[];this.sx=[];this.cache={};this.timeStamp=0;this.ff=[];this.ng=[];this.NC=null;this.qC=!1;this.PF=this.id=null;this.tE=this.yM=fa;this.wz=0;this.JD=!1;this.RN=1;this.eh={};this.Ao=0;this.Zp=ka();this.Rn(!0)}function ka(){var aa={up:{},ob:[],pop:function(){var ca=aa.ob.pop();aa.up[ca.key]=void 0;return ca},push:function(ca,ia){ia={key:ca,data:ia};aa.ob.push(ia);aa.up[ca]=ia.data},contains:function(ca){return!!aa.up[ca]},
get:function(ca){return aa.up[ca]},set:function(ca,ia){aa.up[ca]=ia;aa.ob.forEach(function(ea,ha){ea.key==ca&&(aa.ob[ha]=ea)})},remove:function(ca){aa.up[ca]=void 0;aa.ob.forEach(function(ia,ea){ia.key==ca&&aa.ob.splice(ea,1)})},length:function(){return aa.ob.length}};return aa}function ja(){var aa={promise:null,resolve:null,reject:null,state:0,result:null,request:null,Dp:function(){return 1===(aa.state&1)},d3:function(){return 2===(aa.state&2)},ah:function(){return!aa.d3()&&!aa.Dp()},G2:function(){return 4===
(aa.state&4)},fQ:function(){aa.state|=4}};aa.promise=new Promise(function(ca,ia){aa.resolve=function(){if(0===aa.state||4===aa.state)aa.state=1,aa.result=arguments[0],ca.apply(null,arguments)};aa.reject=function(){if(0===aa.state||4===aa.state)aa.state=2,ia.apply(null,arguments)}});return aa}function fa(){return!1}function da(aa,ca,ia){if(!(ca in x))return!0;ca=x[ca];for(var ea=0;ea<ca.length;ea++){var ha=aa;var ba=ca[ea];var na=ia;if(ba.name in ha){var ma="",la=!1;ha=ha[ba.name];switch(ba.type){case "s":ma=
"String";la=Object(z.isString)(ha);break;case "a":ma="Array";la=Object(z.isArray)(ha);break;case "n":ma="Number";la=Object(z.isNumber)(ha)&&Object(z.isFinite)(ha);break;case "o":ma="Object",la=Object(z.isObject)(ha)&&!Object(z.isArray)(ha)}la||na.reject('Expected response field "'+ba.name+'" to have type '+ma);ba=la}else na.reject('Response missing field "'+ba.name+'"'),ba=!1;if(!ba)return!1}return!0}y.r(va);var z=y(0);y.n(z);var r=y(1);Ea=y(46);var w=y(30),n=y(367),a=y(79),b=y(297),e=y(99),f=y(41),
h=y(137),x={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};pa.prototype=
Object(z.extend)(pa.prototype,{ZX:function(){var aa=this;return new Promise(function(ca,ia){var ea=new XMLHttpRequest;ea.open("GET",aa.se+"ck");ea.withCredentials=aa.nj();ea.onreadystatechange=function(){ea.readyState===XMLHttpRequest.DONE&&(200===ea.status?ca():ia())};ea.send()})},p8:function(aa,ca){this.yM=aa||fa;this.tE=ca||fa},lK:function(){var aa=this;this.Kk=ja();this.ui=ja();return this.Mr.DC().then(function(){aa.Kw=!1;aa.id=null;aa.qC=!1;return aa.ZX()})},BF:function(){this.yM();this.ZD();
this.re&&(this.re.ah()?this.Nf(this.re.request):this.re.Dp()&&this.tE(this.re.result.url,"pdf")&&(this.re=null,this.EP()));this.sf&&this.sf.ah()&&this.Nf(this.sf.request);this.Ad&&this.Ad.ah()?this.Nf(this.Ad.request):this.ld&&this.ld.ah()&&this.oM(this.ld.request);var aa;for(aa=0;aa<this.ff.length;aa++)this.ff[aa]&&this.ff[aa]&&(this.ff[aa].ah()?this.Nf(this.ff[aa].request):this.ff[aa].Dp()&&this.tE(this.ff[aa].result.url,"image")&&(this.ff[aa]=null,this.sz(Object(z.uniqueId)(),aa)));for(aa=0;aa<
this.ng.length;aa++)this.ng[aa]&&this.ng[aa]&&this.ng[aa].ah()&&!this.ng[aa].G2()&&this.Nf(this.ng[aa].request);for(aa=0;aa<this.Ke.length;aa++)this.Ke[aa]&&this.Ke[aa].ah()&&this.Nf(this.Ke[aa].request)},ZD:function(aa){var ca=this;this.Kw||(this.timeStamp=Date.now(),this.Mr.qG(function(ia){ca.s4(ia)},function(){return null},function(){return null},!0).then(function(){clearInterval(ca.lz);ca.lz=null},function(ia){ca.Kw=!1;if(!ca.lz){var ea=0;ca.qC=!0;ca.PF=0;ca.lz=setInterval(function(){2>ea++?ca.BF():
(clearInterval(ca.lz),aa&&aa.reject(e.a),Object(r.f)("WebViewerServer connection failed:"+ia))},5E3)}}),this.Kw=!0)},s$:function(){var aa=this,ca=createPromiseCapability();if(this.El){var ia=new FormData;ia.append("file",this.El.fileHandle,this.El.fileHandle.name);var ea=this.El.loadCallback;var ha="upload";var ba=this.El.extension}else if(this.Au){ia={uri:this.Au.uri,Efa:this.Au.shareId};ia=Object.keys(ia).map(function(ta){return ta+"="+(ia[ta]?encodeURIComponent(ia[ta]):"")}).join("&");var na="application/x-www-form-urlencoded; charset=UTF-8";
ea=this.Au.loadCallback;ha="url";ba=this.Au.extension}else return Promise.resolve();var ma=new XMLHttpRequest,la=Object(w.h)(aa.se,"AuxUpload");la=Object(h.a)(la)+"&type="+ha+"&ext="+ba;ma.open("POST",la);ma.withCredentials=this.nj();na&&ma.setRequestHeader("Content-Type",na);ma.addEventListener("load",function(){if(ma.readyState===ma.DONE&&200===ma.status){var ta=JSON.parse(ma.response);aa.uC=ta.uri;ea(ta);ca.resolve(ta)}});ma.addEventListener("error",function(){ca.reject(ma.statusText+" "+JSON.stringify(ma))});
this.El&&null!=this.El.onProgress&&(ma.upload.onprogress=function(ta){aa.El.onProgress(ta)});ma.send(ia);return ca.promise},f7:function(aa){this.password=aa||null;this.ui.Dp()||(this.ui=ja(),this.Nf({t:"pages"}));return this.ui.promise},Ut:function(aa){this.NC=aa||null;this.ui.Dp()||(this.ZD(this.ui),this.Nf({t:"pages"}));return this.ui.promise},Lr:function(aa){aa=Object.assign(aa,{uri:encodeURIComponent(this.uC)});this.NC&&(aa.ext=this.NC);this.Ge&&(aa.c=this.Ge);this.password&&(aa.pswd=this.password);
this.ZJ&&(aa.cacheKey=this.ZJ);this.WN&&(aa.locale=this.WN);return aa},K7:function(){0<this.Zp.length()&&10>=this.Ao&&this.L7(this.Zp.pop().data)},LW:function(aa){return 0<this.Zp.length()&&this.Zp.contains(aa)?(this.Zp.remove(aa),!0):!1},Nf:function(aa){aa=this.Lr(aa);this.Mr.send(aa)},TP:function(aa,ca){10<this.Ao?this.Zp.push(aa,ca):(this.Ao++,aa=this.Lr(ca),this.Mr.send(aa))},L7:function(aa){this.Ao++;aa=this.Lr(aa);this.Mr.send(aa)},ej:function(aa){return aa},s4:function(aa){var ca=this,ia=aa.data,
ea=aa.err,ha=aa.t;switch(ha){case "upload":ea?ca.t$.reject(ea):ca.t$.resolve("Success");break;case "pages":ea?ca.ui.reject(ea):da(ia,ha,ca.ui)&&ca.ui.resolve(ia);break;case "config":if(ea)ca.Kk.reject(ea);else if(da(ia,ha,ca.Kk)){ia.id&&(ca.id=ia.id);if(ia.auth){var ba=Object(f.a)("wvsQueryParameters");ba.auth=ia.auth;Object(f.b)("wvsQueryParameters",ba)}ia.serverVersion&&(ca.LR=ia.serverVersion,Object(r.g)("[WebViewer Server] server version: "+ca.LR));ia.serverID?(ca.wz=ia.serverID===ca.PF&&ca.JD?
ca.wz+1:0,ca.PF=ia.serverID):ca.wz=0;ca.JD=!1;ca.Kk.resolve(ia)}break;case "health":ea?ca.Kk.reject(ea):da(ia,ha,ca.Kk)&&(ia=ia.unhealthy,ca.JQ&&ia?Object(r.i)("Server failed health check. Single server mode ignoring check."):!ca.eca&&ia&&1>=ca.wz&&(ca.JD=!0,ca.lK().then(function(){ca.BF()},function(){ca.BF()})));break;case "pdf":ia.url=Object(h.a)(ca.se+"../"+encodeURI(ia.url));ea?ca.re.reject(ea):da(ia,ha,ca.re)&&ca.re.resolve(ia);break;case "ApString2Xod":ia.url=Object(h.a)(ca.se+"../data/"+encodeURI(ia.url));
ea?ca.eh[ia.rID].reject(ea):da(ia,ha,ca.eh[ia.rID])&&ca.eh[ia.rID].resolve(ia);break;case "docmod":ia.url=Object(h.a)(ca.se+"../"+encodeURI(ia.url));ea?ca.eh[ia.rID].reject(ea):da(ia,ha,ca.re)&&ca.eh[ia.rID].resolve(ia);break;case "xod":if(ea)this.Ad&&this.Ad.ah()&&this.Ad.reject(ea),this.ld&&this.ld.ah()&&this.ld.reject(ea);else if(ia.notFound)ia.noCreate||this.Ad&&this.Ad.ah()&&this.Ad.resolve(ia),this.ld&&this.ld.ah()&&this.ld.resolve(ia);else{ia.url&&(ia.url=Object(h.a)(ca.se+"../"+encodeURI(ia.url)));
if(!this.ld||this.ld.Dp())this.ld=ja(),this.ld.request={t:"xod",noCreate:!0};this.Ad||(this.Ad=ja(),this.Ad.request={t:"xod"});this.ld.resolve(ia);this.Ad.resolve(ia)}break;case "annots":if(ea)ca.sf.reject(ea);else if(da(ia,ha,ca.sf)){ca.sf.fQ();var na=new XMLHttpRequest;ba=ca.se+"../"+encodeURI(ia.url);var ma=ia.hasAppearance?Object(h.a)(ba+".xodapp"):null;na.open("GET",Object(h.a)(ba));na.responseType="text";na.withCredentials=this.nj();na.addEventListener("load",function(){na.readyState===na.DONE&&
200===na.status&&ca.sf.resolve({PG:na.response,pw:ma})});na.addEventListener("error",function(){ca.sf.reject(na.statusText+" "+JSON.stringify(na))});na.send()}break;case "image":ca.Ao--;var la=this.ff[ia.p];ea?la.promise.reject(ea):da(ia,ha,la)&&(la.result=ia,la.result.url=Object(h.a)(ca.se+"../"+encodeURI(la.result.url)),la.resolve(la.result));break;case "tiles":ca.Ao--;la=ia.rID;ba=this.Ke[la];this.Ke[la]=null;this.sx.push(la);if(ea)ba.reject(ea);else if(da(ia,ha,ba)){for(ea=0;ea<ia.tiles.length;ea++)ia.tiles[ea]=
Object(h.a)(ca.se+"../"+encodeURI(ia.tiles[ea]));ba.resolve(ia)}break;case "text":la=this.ng[ia.p];if(ea)la.reject(ea);else if(da(ia,ha,la)){la.fQ();var ta=new XMLHttpRequest;ia=Object(h.a)(ca.se+"../"+encodeURI(ia.url));ta.open("GET",ia);ta.withCredentials=this.nj();ta.addEventListener("load",function(){ta.readyState===ta.DONE&&200===ta.status&&(la.result=JSON.parse(ta.response),la.resolve(la.result))});ta.addEventListener("error",function(sa){la.reject(ta.statusText+" "+JSON.stringify(sa))});ta.send()}break;
case "progress":"loading"===ia.t&&ca.trigger(a.a.Events.DOCUMENT_LOADING_PROGRESS,[ia.bytes,ia.total])}this.K7();!ha&&aa.echo&&aa&&"apstring2xod"==aa.echo.t&&(aa=aa.echo.reqID)&&(2<=parseInt(ca.LR)?ca.eh[aa].reject("Message unhandled by server"):ca.eh[aa].reject())},zL:function(){this.ZD(this.Kk);return this.Kk.promise},J_:function(aa){for(var ca=this,ia=new XMLHttpRequest,ea=Object(h.a)(this.se+"aul")+"&id="+this.id,ha=new FormData,ba={},na=0;na<aa.body.length;na++){var ma=aa.body[na];ba[ma.id]=
ma.LB.w+";"+ma.LB.h;ha.append(ma.id,ma.LB.dataString)}aa={t:"apstring2xod",reqID:this.RN++,parts:ba};var la=this.Lr(aa);ha.append("msg",JSON.stringify(la));ca.eh[la.reqID]=ja();ia.open("POST",ea);ia.withCredentials=ca.nj;ea=new Promise(function(ta,sa){ia.onreadystatechange=function(){4===ia.readyState&&(200===ia.status?ta():sa("An error occurred while sending down appearance strings to the server"))}});ia.send(ha);return ea.then(function(){return ca.eh[la.reqID].promise})},I_:function(){this.sf||
(this.sf=ja(),this.sf.request={t:"annots"},this.Nf(this.sf.request));return this.sf.promise},sz:function(aa,ca){this.ff[ca]||(this.ff[ca]=ja(),this.ff[ca].request={t:"image",p:ca},this.TP(aa,this.ff[ca].request));return this.ff[ca].promise},g7:function(aa){this.ng[aa]||(this.ng[aa]=ja(),this.ng[aa].request={t:"text",p:aa},this.Nf(this.ng[aa].request));return this.ng[aa].promise},h7:function(aa,ca,ia,ea,ha){var ba=this.Ke.length;this.sx.length&&(ba=this.sx.pop());this.Ke[ba]=ja();this.Ke[ba].request=
{t:"tiles",p:ca,z:ia,r:ea,size:ha,rID:ba};this.TP(aa,this.Ke[ba].request);return this.Ke[ba].promise},EP:function(){this.re||(this.re=ja(),this.re.request={t:"pdf"},this.qC?this.re.resolve({url:this.uC}):this.Nf(this.re.request));return this.re.promise},TL:function(aa){var ca=this,ia=new XMLHttpRequest,ea=Object(h.a)(this.se+"aul")+"&id="+this.id,ha=new FormData,ba={};aa.annots&&(ba.annots="xfdf");aa.watermark&&(ba.watermark="png");aa.redactions&&(ba.redactions="redact");ba={t:"docmod",reqID:this.RN++,
parts:ba};aa.print&&(ba.print=!0);var na=this.Lr(ba);ha.append("msg",JSON.stringify(na));return Promise.all([aa.annots,aa.watermark,aa.redactions].map(function(ma){return Promise.resolve(ma)})).then(function(ma){var la=ma[0],ta=ma[1],sa=ma[2];la&&ha.append("annots",la);ta&&ha.append("watermark",ma.watermark);sa&&ha.append("redactions",sa);ca.eh[na.reqID]=ja();ia.open("POST",ea);ia.withCredentials=ca.nj;ma=new Promise(function(ua,wa){ia.onreadystatechange=function(){4===ia.readyState&&(200===ia.status?
ua():wa("An error occurred while sending down annotation data to the server"))}});ia.send(ha);return ma.then(function(){return ca.eh[na.reqID].promise})})},oM:function(){this.ld||(this.ld=ja(),this.ld.request={t:"xod",noCreate:!0},this.Nf(this.ld.request));return this.ld.promise},i7:function(){this.Ad||(this.Ad=ja(),this.Ad.request={t:"xod"},this.Nf(this.Ad.request));return this.Ad.promise},tl:function(){return!0},request:function(){},cP:function(){},abort:function(){for(var aa=0;aa<this.Ke.length;aa++)this.Ke[aa]&&
(this.Ke[aa].resolve(null),this.Ke[aa]=null,this.sx.push(aa));this.close()},Ez:function(aa){this.Ge=this.Ge||{};this.Ge.headers=aa},Yca:function(){return this.Ge?Object(z.omit)(this.Ge.headers,["Cookie","cookie"]):null},Rn:function(aa){this.Ge=this.Ge||{};this.Ge.internal=this.Ge.internal||{};this.Ge.internal.withCredentials=aa},nj:function(){return this.Ge&&this.Ge.internal?this.Ge.internal.withCredentials:null},getFileData:function(){return Promise.reject()}});Object(Ea.a)(pa);Object(b.a)(pa);Object(b.b)(pa);
va["default"]=pa},367:function(Ea,va,y){function pa(z,r,w){function n(b,e){function f(ta){x().then(function(sa){ba&&!na?setTimeout(function(){f(ta)},1):sa.send(JSON.stringify(ta))})}function h(ta,sa,ua,wa){var qa=window.createPromiseCapability(),Aa=!1,Ia=qa;ia=ta;ea=sa;ha=ua;ca=null;wa&&(ta=Object(fa.a)("wvsQueryParameters"),ta.bcid=Object(ja.i)(8),Object(fa.b)("wvsQueryParameters",ta));try{ta=ma?la+"/"+ma:la+"/ws";ta=Object(da.a)(ta);var Ka=new WebSocket(ta);Ka.onopen=function(){qa.resolve();Aa=
!0;qa=null;ba=!1;aa.resolve(Ka);ea&&ea()};Ka.onerror=function(Ja){ba=na=!0;qa&&qa.reject(Ja);ca&&ca.reject()};Ka.onclose=function(){aa=window.createPromiseCapability();ba=!0;ca||(ca=window.createPromiseCapability());ca.resolve();ha&&ha();ia&&Aa&&ia({t:"health",data:{unhealthy:!0,isDead:!0}})};Ka.onmessage=function(Ja){Ja&&Ja.data&&(Ja=JSON.parse(Ja.data),Ja.hb?f({hb:!0}):Ja.end?close():ia(Ja))}}catch(Ja){qa.reject(Ja),qa=null}return Ia.promise}function x(){ba&&ia&&h(ia);return aa.promise}var aa=window.createPromiseCapability(),
ca=null,ia,ea,ha=null,ba=!1,na=!1,ma=e,la=function(ta){var sa=ta.indexOf("://"),ua="ws://";0>sa?sa=0:(5===sa&&(ua="wss://"),sa+=3);var wa=ta.lastIndexOf("/");0>wa&&(wa=ta.length);return ua+ta.slice(sa,wa)}(b);return{send:f,qG:h,DC:function(){return ca?ca.promise:x().then(function(ta){ca=window.createPromiseCapability();ia=null;ta.close();return ca.promise})}}}function a(b){var e=b.lastIndexOf("/");0>e&&(e=b.length);return b.slice(0,e)}return window.WebSocket&&!w?n(z,r):function(b,e){function f(ta){(ha?
ha.promise:Promise.resolve(ea)).then(function(sa){var ua=new XMLHttpRequest,wa=ia?ca+"/"+ia+"pf":ca+"/pf";wa=Object(da.a)(wa)+"&id="+sa;sa=new FormData;sa.append("data",JSON.stringify(ta));ua.open("POST",wa);ua.withCredentials=!0;ua.send(sa)})}function h(){ea=0;ha||(ha=window.createPromiseCapability())}function x(){aa=new XMLHttpRequest;var ta=ca+"/pf";ta+=0!==ea?"?id="+ea+"&uc="+la:"?uc="+la;la++;aa.open("GET",ta,!0);aa.withCredentials=!0;aa.setRequestHeader("Cache-Control","no-cache");aa.setRequestHeader("X-Requested-With",
"XMLHttpRequest");var sa=aa,ua=!1;aa.onreadystatechange=function(){a:if(3<=sa.readyState&&!ua){try{var wa=sa.responseText.length}catch(Ia){Object(ka.g)("caught exception");break a}if(0<wa)try{var qa=sa.responseText.split("\n");for(qa[qa.length-1]&&qa.pop();0<qa.length&&3>qa[qa.length-1].length;)"]"===qa.pop()&&h();0<qa.length&&3>qa[0].length&&qa.shift();for(wa=0;wa<qa.length;++wa)qa[wa].endsWith(",")&&(qa[wa]=qa[wa].substr(0,qa[wa].length-1));0===ea&&0<qa.length&&(ea=JSON.parse(qa.shift()).id,wa=
ha,ha=null,wa.resolve(ea));var Aa;for(wa=0;wa<qa.length;++wa)(Aa=JSON.parse(qa[wa]))&&Aa.end?close():Aa&&Aa.hb&&Aa.id===ea?f({hb:!0}):ma(Aa)}catch(Ia){}ba||(ua=!0,x())}};aa.send()}var aa,ca=a(b),ia=e,ea=0,ha=window.createPromiseCapability(),ba=!1,na=null,ma=null,la=0;return{send:f,qG:function(ta,sa,ua){ma=ta;na=ua;ba=!1;h();x();sa&&sa();return Promise.resolve()},DC:function(){h();ma=null;ba=!0;na&&na();aa.abort();return Promise.resolve()}}}(z,r)}y.d(va,"a",function(){return pa});var ka=y(1),ja=y(30),
fa=y(41),da=y(137)}}]);}).call(this || window)
