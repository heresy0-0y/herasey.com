/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[7],{138:function(Ea,va,y){function pa(Ja,Ca,Qa,Na){return Object(ea.b)(void 0,void 0,void 0,function(){var Ba,Ha,Ga,ra;return Object(ea.d)(this,function(Da){switch(Da.label){case 0:return Ba=Ka.getDocument(),Ha=[1],[4,Object(ha.c)(Ca,{extension:"pdf"})];case 1:return Ga=Da.ea(),ra=!0,[4,Ba.Gf(Ga,Ha,Ja,ra)];case 2:return Da.ea(),[4,Ba.ug([Ja+1],ra)];case 3:return Da.ea(),Ka.getDocument().rF(),Ka.qF(Ja),Ka.Yd(),fa(Ja),e(Ja,Qa.galleys,
Na),e(Ja,Qa.objects,Na),[2]}})})}function ka(Ja){Ja=(new DOMParser).parseFromString(Ja,"text/html").documentElement.querySelector("body");Ja.querySelectorAll("p").forEach(function(Ca){Ca.querySelectorAll("span").forEach(function(Ba){var Ha=Ba.getAttribute("style");Ha=ja(Ha,Ba.innerHTML);Ba.innerHTML=Ha});var Qa=Ca.getAttribute("style"),Na=Ca.innerHTML.replaceAll("<br>","");Ca.innerHTML=ja(Qa,Na)});return Ja.innerHTML.trim()}function ja(Ja,Ca){Ja.includes("bold")&&(Ca="<strong>"+Ca+"</strong>");Ja.includes("italic")&&
(Ca="<em>"+Ca+"</em>");Ja.includes("text-decoration: underline")&&(Ca="<u>"+Ca+"</u>");return Ca}function fa(Ja){var Ca=Ka.Ca(),Qa=Ca.Xh().filter(function(Na){return Na.Qs()&&Na.PageNumber===Ja});Ca.Rw(Qa,{force:!0,source:"contentEditTool"})}function da(Ja,Ca){Ca.forEach(function(Qa){Aa[Ja]||(Aa[Ja]=[]);Aa[Ja].find(function(Na){return Na.id===Qa.id})||Aa[Ja].push(Qa)})}function z(Ja,Ca){Ca.forEach(function(Qa){qa[Ja]||(qa[Ja]=[]);qa[Ja].find(function(Na){return Na.id===Qa.id})||qa[Ja].push(Qa)})}
function r(Ja,Ca,Qa,Na){this.top=Ja;this.left=Ca;this.bottom=Qa;this.right=Na;this.topVal=function(){return Math.round(this.top)};this.bottomVal=function(){return Math.round(this.bottom)};this.leftVal=function(){return Math.round(this.left)};this.rightVal=function(){return Math.round(this.right)};this.height=function(){return Math.round(Math.abs(this.top-this.bottom))};this.width=function(){return Math.round(this.right-this.left)};this.VJ=function(Ba){return this.topVal()!=Ba.topVal()||this.leftVal()!=
Ba.leftVal()||this.bottomVal()!=Ba.bottomVal()||this.rightVal()!=Ba.rightVal()}}function w(Ja,Ca,Qa,Na,Ba){this.id=Ja;this.pagenum=Ca;this.galleysContents=Qa;this.contents=Na;this.galleyBox=Ba}function n(Ja,Ca,Qa,Na){this.id=Ca;this.type=Ja;this.bbox=Qa;this.pagenum=Na}function a(Ja,Ca,Qa,Na,Ba){this.id=Ja;this.pagecount=Ca;this.pageBBox=Qa;this.galleys=Na;this.objects=Ba}function b(Ja,Ca,Qa,Na,Ba){var Ha=[];(new DOMParser).parseFromString(Na,"text/html").documentElement.querySelectorAll("p").forEach(function(Oa,
Ma){Ha[Ma]=Oa.innerHTML});Qa=(new DOMParser).parseFromString(Qa,"text/html");var Ga=null;Qa.documentElement.querySelectorAll("p").forEach(function(Oa,Ma){Ma<Ha.length?(Oa.innerHTML=Ha[Ma],Ga=Oa.getAttribute("style"),Ga=Ga.replace("font:italic","font:normal"),Ga=Ga.replace(" bold "," normal "),Ga=Ga.replace("underline:1;","underline:0;"),Oa.setAttribute("style",Ga)):Oa.remove()});for(Na=Qa.documentElement.querySelectorAll("p").length;Na<Ha.length;Na++){var ra=document.createElement("p");ra.setAttribute("id",
"0");ra.innerHTML=Ha[Na];null!=Ga&&ra.setAttribute("style",Ga);Qa.documentElement.querySelector("body").appendChild(ra)}Qa=Qa.documentElement.querySelector("body").innerHTML;var Da="";qa[Ja].forEach(function(Oa){Oa.id==Ba&&(Da=Oa)});if(""==Da)return"";Ca="<DOC id='"+Ca.id+"' pagecount='"+Ca.pagecount+"'>";Ca=Ca+("<STORY galley_ids='"+Ba+"' pagenum='"+Ja+"'><galleys>")+(Da.galleysContents+"</galleys>");Da.contents=Qa;Ca=Ca+Qa+"\n</STORY>";return Ca+="</DOC>"}function e(Ja,Ca,Qa){var Na=[],Ba=Ka.getDocument(),
Ha=null;Ca.forEach(function(Ga){if(Ga instanceof n){var ra=Ba.bl(Ja,Ga.bbox.leftVal(),Ga.bbox.topVal());var Da=ra.x;var Oa=ra.y;var Ma=Ba.bl(Ja,Ga.bbox.rightVal(),Ga.bbox.bottomVal());ra=Ma.x;Ma=Ma.y}else if(Ga instanceof w)ra=Ba.bl(Ja,Ga.galleyBox.leftVal(),Ga.galleyBox.topVal()),Da=ra.x,Oa=ra.y,Ma=Ba.bl(Ja,Ga.galleyBox.rightVal(),Ga.galleyBox.bottomVal()),ra=Ma.x,Ma=Ma.y;else return;var Ta=new window.Core.Annotations.RectangleAnnotation,Wa=sa.a.OBJECT;Ga instanceof w&&(Wa=sa.a.TEXT);Ta.V7(Ga,Wa);
Ta.PageNumber=Ga.pagenum;Ta.X=Da;Ta.Y=Oa;Ta.Width=ra-Da;Ta.Height=Ma-Oa;Ta.StrokeColor=new ba.a("#3183C8");Ta.FillColor=new ba.a(255,255,255,.01);Ta.Style="dash";Ta.Dashes="4,3";Ta.IK();Ta.selectionModel=na.a;Na.push(Ta);"undefined"!==typeof Qa&&Qa===Ga.id&&(Ha=Ta)});Ca=Ka.Ca();Ca.hm(Na);Ha&&Ca.Mn(Ha);Ca.fj(Na)}function f(Ja,Ca,Qa){return Object(ea.b)(this,void 0,void 0,function(){var Na,Ba,Ha,Ga,ra;return Object(ea.d)(this,function(Da){switch(Da.label){case 0:Na=Ja.data;Ha=Na.cmd;switch(Ha){case "isReady":return[3,
1];case "initialiseInfixServer":return[3,3];case "exportFile":return[3,4];case "importText":return[3,5];case "transformObject":return[3,5];case "deleteObject":return[3,6]}return[3,7];case 1:return[4,Object(la.b)()];case 2:return Ga=Da.ea(),ua.postMessage({cmd:"initialiseInfixServer",l:Ga}),[3,7];case 3:return(ra=h(Na.resultsXML))?Ca():Qa("License key does not have content edit permission"),[3,7];case 4:return Na.exportPerformed?x(Na.pageNumber,Na.exportXML,Na.objectXML,Na.resultsXML):(Ba=Ia[Na.pageNumber],
z(Na.pageNumber,Ba.galleys),da(Na.pageNumber,Ba.objects),fa(Na.pageNumber),e(Na.pageNumber,Ba.galleys),e(Na.pageNumber,Ba.objects)),[3,7];case 5:return Ba=Ia[Na.pageNumber],ia(Na.pageNumber,Na.resultsXML),pa(Na.pageNumber,Na.pdfBuffer,Ba,Na.id),[3,7];case 6:return Ba=Ia[Na.pageNumber],ia(Na.pageNumber,Na.resultsXML),Ba.galleys=Ba.galleys.filter(function(Oa){return Oa.id!==Na.id}),Ba.objects=Ba.objects.filter(function(Oa){return Oa.id!==Na.id}),pa(Na.pageNumber,Na.pdfBuffer,Ba),[3,7];case 7:return[2]}})})}
function h(Ja){Ja=new Uint8Array(Ja);var Ca=(new TextDecoder("utf-8")).decode(Ja);Ja=!1;Ca=(new DOMParser).parseFromString(Ca,"text/xml").getElementsByTagName("LicenseCheck");null!==Ca&&0<Ca.length&&(Ca=Ca[0].getElementsByTagName("Status")[0].innerHTML,"error"!=Ca&&"ok"==Ca&&(Ja=!0));return Ja}function x(Ja,Ca,Qa,Na){var Ba=new Uint8Array(Ca),Ha=new TextDecoder("utf-8");Ca=Ha.decode(Ba);Ba=new Uint8Array(Qa);Qa=Ha.decode(Ba);Ba=new Uint8Array(Na);Na=Ha.decode(Ba);Ia[Ja]=ca(Ja,Ca,Qa,Na);Na=Ia[Ja];
z(Ja,Na.galleys);da(Ja,Na.objects);fa(Ja);e(Ja,Na.galleys);e(Ja,Na.objects)}function aa(Ja,Ca){Ja=parseFloat(Ja);return isNaN(Ca)||Ca<Ja?Ja:Ca}function ca(Ja,Ca,Qa,Na){var Ba;var Ha=new DOMParser;Na=Ha.parseFromString(Na,"text/xml");Array.prototype.slice.call(Na.getElementsByTagName("BBox")).forEach(function(Da){if("CropBox"==Da.getAttribute("Name")){var Oa=parseFloat(Da.getElementsByTagName("Top").item(0).innerHTML),Ma=parseFloat(Da.getElementsByTagName("Bottom").item(0).innerHTML),Ta=parseFloat(Da.getElementsByTagName("Left").item(0).innerHTML);
Da=parseFloat(Da.getElementsByTagName("Right").item(0).innerHTML);Ba=new r(Oa,Ta,Ma,Da)}});Ha=new DOMParser;Na=Ha.parseFromString(Ca,"text/xml");var Ga=[];Array.prototype.slice.call(Na.getElementsByTagName("STORY")).forEach(function(Da){var Oa=Da.getAttribute("galley_ids"),Ma=Array.prototype.slice.call(Da.getElementsByTagName("g"))[0],Ta=Ma.getAttribute("bbox").split(" ");Ta=new r(parseFloat(Ta[0]),parseFloat(Ta[1]),parseFloat(Ta[2]),parseFloat(Ta[3]));Ma=Ma.innerHTML;var Wa=Array.prototype.slice.call(Da.getElementsByTagName("galleys"))[0];
Wa.parentNode.removeChild(Wa);Da=Da.innerHTML;Da=(new DOMParser).parseFromString(Da,"text/html").documentElement.querySelector("body").innerHTML.trim();Oa=new w(Oa,Ja,Ma,Da,Ta);Ga.push(Oa)});Ha=new DOMParser;var ra=[];Ca=Ha.parseFromString(Qa,"text/xml").getElementsByTagName("Object");Array.prototype.slice.call(Ca).forEach(function(Da){var Oa=Da.getAttribute("Type"),Ma=Da.getAttribute("OID");Da=Array.prototype.slice.call(Da.getElementsByTagName("Point"));var Ta=Number.NaN,Wa=Number.NaN,ab=Number.NaN,
db=Number.NaN;Da.forEach(function(gb){var kb=gb.getAttribute("Name");"TL"==kb?(Ta=aa(gb.getAttribute("Y"),Ta),ab=aa(gb.getAttribute("X"),ab)):"TR"==kb?(Ta=aa(gb.getAttribute("Y"),Ta),db=aa(gb.getAttribute("X"),db)):"BR"==kb?(Wa=aa(gb.getAttribute("Y"),Wa),db=aa(gb.getAttribute("X"),db)):"BL"==kb&&(Wa=aa(gb.getAttribute("Y"),Wa),ab=aa(gb.getAttribute("X"),ab))});Da=new r(Ta,ab,Wa,db);Oa=new n(Oa,Ma,Da,Ja);ra.push(Oa)});Ca=Array.prototype.slice.call(Na.getElementsByTagName("DOC"))[0].getAttribute("id");
return new a(Ca,1,Ba,Ga,ra)}function ia(Ja,Ca){var Qa;Ca=(new TextDecoder("utf-8")).decode(Ca);Ca=(new DOMParser).parseFromString(Ca,"text/xml");var Na=Ca.getElementsByTagName("Galley").item(0);if(null!=Na){var Ba=Na.getAttribute("id");Na=Ca.getElementsByTagName("BBox");Na=Array.prototype.slice.call(Na);Na.forEach(function(Ga){var ra=Ga.getElementsByTagName("Top"),Da=parseFloat(ra.item(0).innerHTML);ra=Ga.getElementsByTagName("Left");var Oa=parseFloat(ra.item(0).innerHTML);ra=Ga.getElementsByTagName("Bottom");
var Ma=parseFloat(ra.item(0).innerHTML);ra=Ga.getElementsByTagName("Right");Ga=parseFloat(ra.item(0).innerHTML);Qa=new r(Da,Oa,Ma,Ga)});qa[Ja].forEach(function(Ga){Ga.id==Ba&&1==Qa.VJ(Ga.galleyBox)&&(Ga.galleyBox=Qa)})}Na=Ca.getElementsByTagName("Object").item(0);if(null!=Na){var Ha=Na.getAttribute("OID");Na=Ca.getElementsByTagName("BBox");Na=Array.prototype.slice.call(Na);Na.forEach(function(Ga){var ra=Ga.getElementsByTagName("Top"),Da=parseFloat(ra.item(0).innerHTML);ra=Ga.getElementsByTagName("Left");
var Oa=parseFloat(ra.item(0).innerHTML);ra=Ga.getElementsByTagName("Bottom");var Ma=parseFloat(ra.item(0).innerHTML);ra=Ga.getElementsByTagName("Right");Ga=parseFloat(ra.item(0).innerHTML);Qa=new r(Da,Oa,Ma,Ga)});Aa[Ja].forEach(function(Ga){Ga.id==Ha&&1==Qa.VJ(Ga.bbox)&&(Ga.bbox=Qa)})}}y.r(va);var ea=y(2),ha=y(56),ba=y(13),na=y(382),ma=y(31),la=y(65),ta=y(1),sa=y(243),ua=null,wa=null,qa={},Aa={},Ia={},Ka;va["default"]={C5:function(Ja){return Object(ea.b)(void 0,void 0,void 0,function(){return Object(ea.d)(this,
function(){wa||(Ka=Ja,wa=new Promise(function(Ca,Qa){ua=new Worker(window.Core.getWorkerPath()+"contentEdit/InfixServerModule.js");ua.onmessage=function(Na){f(Na,Ca,Qa)};ua.postMessage({cmd:"isReady"})}));return[2,wa]})})},Hea:function(Ja,Ca,Qa){return Object(ea.b)(void 0,void 0,void 0,function(){var Na,Ba,Ha,Ga;return Object(ea.d)(this,function(ra){switch(ra.label){case 0:return fa(Ca),qa[Ca]=[],Aa[Ca]=[],[4,Ja.Ze([Ca])];case 1:return Na=ra.ea(),Ba=new TextEncoder,Ha=Ba.encode(""),Ga=Ha.buffer,ua.postMessage({cmd:"exportFile",
pageNumber:Ca,performExport:Qa,pdfFile:Na,tableData:Ga},[Na,Ga]),[2]}})})},Mba:function(Ja){return Object(ea.b)(void 0,void 0,void 0,function(){var Ca,Qa,Na,Ba,Ha,Ga,ra,Da;return Object(ea.d)(this,function(Oa){switch(Oa.label){case 0:return Ca=Ja.id,Qa=Ja.isText,Na=Ja.pageNumber,Ba=Ka.getDocument(),[4,Ba.Ze([Na])];case 1:return Ha=Oa.ea(),Ga=new TextEncoder,ra=Ga.encode(""),Da=ra.buffer,ua.postMessage({cmd:"deleteObject",pdfFile:Ha,pageNumber:Na,objectID:Ca,isText:Qa,tableData:Da},[Da]),[2]}})})},
Qfa:function(Ja){return Object(ea.b)(void 0,void 0,void 0,function(){var Ca,Qa,Na,Ba,Ha,Ga,ra,Da,Oa,Ma,Ta,Wa,ab;return Object(ea.d)(this,function(db){switch(db.label){case 0:return Ca=Ja.id,Qa=Ja.position,Na=Qa.top,Ba=Qa.left,Ha=Qa.bottom,Ga=Qa.right,ra=Ja.isText,Da=Ja.pageNumber,Oa=Ka.getDocument(),[4,Oa.Ze([Da])];case 1:return Ma=db.ea(),Ta=new TextEncoder,Wa=Ta.encode(""),ab=Wa.buffer,ua.postMessage({cmd:"transformObject",pdfFile:Ma,pageNumber:Da,objectID:Ca,isText:ra,topVal:Na,leftVal:Ba,bottomVal:Ha,
rightVal:Ga,tableData:ab},[ab]),[2]}})})},l$:function(Ja,Ca){return Object(ea.b)(void 0,void 0,void 0,function(){var Qa,Na,Ba,Ha,Ga,ra,Da,Oa,Ma,Ta,Wa,ab,db,gb,kb;return Object(ea.d)(this,function(lb){switch(lb.label){case 0:Qa=Ca.replace(/<span style="color: var\(--text-color\);">(.*?)<\/span>/g,"$1");Na=Ja.FA.id;Ba=Ja.PageNumber;Ha=Ia[Ba];Ga=Ha.galleys.find(function(ib){return ib.id===Na});ra=ka(Ga.contents);Da=b(Ba,Ha,ra,Qa,Na);if(""==Da)return[3,2];Oa=new TextEncoder;Ma=Oa.encode(Da);Ta=Ma.buffer;
Wa=Object(ma.c)()||"https://www.pdftron.com/webfonts/v2/";ab=Ka.getDocument();return[4,ab.Ze([Ba])];case 1:return db=lb.ea(),Oa=new TextEncoder,gb=Oa.encode(""),kb=gb.buffer,ua.postMessage({cmd:"importText",pdfFile:db,pageNumber:Ba,webFontURL:Wa,galleyId:Na,importData:Ta,tableData:kb},[Ta,kb]),[3,3];case 2:Object(ta.f)("Unable to generate import XML"),lb.label=3;case 3:return[2]}})})},Z_:function(Ja){if(Ja)return ka(Ja.contents);Object(ta.f)("Unable to extract document content")}}},382:function(Ea,
va,y){var pa=y(2);Ea=y(68);var ka=y(43);y=function(ja){function fa(){return null!==ja&&ja.apply(this,arguments)||this}Object(pa.c)(fa,ja);fa.prototype.testSelection=function(da,z,r){return ka.a.Yi(da,z,r)};return fa}(Ea.a);va.a=y}}]);}).call(this || window)
