/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[15],{347:function(Ea,va,y){y.r(va);var pa=y(2),ka=y(0);y.n(ka);var ja=y(1),fa=y(124);Ea=y(46);var da=y(79),z=y(204),r=y(57),w=y(203);y=y(297);var n=window,a=function(){function f(h,x,aa){var ca=-1===h.indexOf("?")?"?":"&";switch(x){case r.a.NEVER_CACHE:this.url=h+ca+"_="+Object(ka.uniqueId)();break;default:this.url=h}this.ie=aa;this.request=new XMLHttpRequest;this.request.open("GET",this.url,!0);this.request.setRequestHeader("X-Requested-With",
"XMLHttpRequest");this.request.overrideMimeType?this.request.overrideMimeType("text/plain; charset=x-user-defined"):this.request.setRequestHeader("Accept-Charset","x-user-defined");this.status=w.a.NOT_STARTED}f.prototype.start=function(h,x){var aa=this,ca=this,ia=this.request,ea;ca.$s=0;h&&Object.keys(h).forEach(function(ha){aa.request.setRequestHeader(ha,h[ha])});x&&(this.request.withCredentials=x);this.hz=setInterval(function(){var ha=0===window.document.URL.indexOf("file:///");ha=200===ia.status||
ha&&0===ia.status;if(ia.readyState!==w.b.DONE||ha){try{ia.responseText}catch(ba){return}ca.$s<ia.responseText.length&&(ea=ca.Q5())&&ca.trigger(f.Events.DATA,[ea]);0===ia.readyState&&(clearInterval(ca.hz),ca.trigger(f.Events.DONE))}else clearInterval(ca.hz),ca.trigger(f.Events.DONE,["Error received return status "+ia.status])},1E3);this.request.send(null);this.status=w.a.STARTED};f.prototype.Q5=function(){var h=this.request,x=h.responseText;if(0!==x.length)if(this.$s===x.length)clearInterval(this.hz),
this.trigger(f.Events.DONE);else return x=Math.min(this.$s+3E6,x.length),h=n.aM(h,this.$s,!0,x),this.$s=x,h};f.prototype.abort=function(){clearInterval(this.hz);var h=this;this.request.onreadystatechange=function(){Object(ja.i)("StreamingRequest aborted");h.status=w.a.ABORTED;return h.trigger(f.Events.ABORTED)};this.request.abort()};f.prototype.finish=function(){var h=this;this.request.onreadystatechange=function(){h.status=w.a.SUCCESS;return h.trigger(f.Events.DONE)};this.request.abort()};f.Events=
{DONE:"done",DATA:"data",ABORTED:"aborted"};return f}();Object(Ea.a)(a);var b;(function(f){f[f.LOCAL_HEADER=0]="LOCAL_HEADER";f[f.FILE=1]="FILE";f[f.CENTRAL_DIR=2]="CENTRAL_DIR"})(b||(b={}));var e=function(f){function h(){var x=f.call(this)||this;x.buffer="";x.state=b.LOCAL_HEADER;x.oG=4;x.Hj=null;x.Np=fa.c;x.Ok={};return x}Object(pa.c)(h,f);h.prototype.L5=function(x){var aa;for(x=this.buffer+x;x.length>=this.Np;)switch(this.state){case b.LOCAL_HEADER:this.Hj=aa=this.U5(x.slice(0,this.Np));if(aa.lq!==
fa.g)throw Error("Wrong signature in local header: "+aa.lq);x=x.slice(this.Np);this.state=b.FILE;this.Np=aa.UB+aa.sn+aa.$r+this.oG;this.trigger(h.Events.HEADER,[aa]);break;case b.FILE:this.Hj.name=x.slice(0,this.Hj.sn);this.Ok[this.Hj.name]=this.Hj;aa=this.Np-this.oG;var ca=x.slice(this.Hj.sn+this.Hj.$r,aa);this.trigger(h.Events.FILE,[this.Hj.name,ca,this.Hj.hC]);x=x.slice(aa);if(x.slice(0,this.oG)===fa.h)this.state=b.LOCAL_HEADER,this.Np=fa.c;else return this.state=b.CENTRAL_DIR,!0}this.buffer=x;
return!1};h.Events={HEADER:"header",FILE:"file"};return h}(z.a);Object(Ea.a)(e);Ea=function(f){function h(x,aa,ca,ia,ea){ca=f.call(this,x,ca,ia)||this;ca.url=x;ca.stream=new a(x,aa);ca.Zc=new e;ca.FO=window.createPromiseCapability();ca.dP={};ca.ie=ea;return ca}Object(pa.c)(h,f);h.prototype.Ut=function(x){var aa=this;this.request([this.Ah,this.Ki,this.zh]);this.stream.addEventListener(a.Events.DATA,function(ca){try{if(aa.Zc.L5(ca))return aa.stream.finish()}catch(ia){throw aa.stream.abort(),aa.Yr(ia),
x(ia),ia;}});this.stream.addEventListener(a.Events.DONE,function(ca){aa.s5=!0;aa.FO.resolve();ca&&(aa.Yr(ca),x(ca))});this.Zc.addEventListener(e.Events.HEADER,Object(ka.bind)(this.cP,this));this.Zc.addEventListener(e.Events.FILE,Object(ka.bind)(this.k6,this));return this.stream.start(this.ie,this.withCredentials)};h.prototype.ZL=function(x){var aa=this;this.FO.promise.then(function(){x(Object.keys(aa.Zc.Ok))})};h.prototype.tl=function(){return!0};h.prototype.request=function(x){var aa=this;this.s5&&
x.forEach(function(ca){aa.dP[ca]||aa.Z9(ca)})};h.prototype.cP=function(){};h.prototype.abort=function(){this.stream&&this.stream.abort()};h.prototype.Z9=function(x){this.trigger(da.a.Events.PART_READY,[{Qa:x,error:"Requested part not found",Ng:!1,We:!1}])};h.prototype.k6=function(x,aa,ca){this.dP[x]=!0;this.trigger(da.a.Events.PART_READY,[{Qa:x,data:aa,Ng:!1,We:!1,error:null,jc:ca}])};return h}(da.a);Object(y.a)(Ea);Object(y.b)(Ea);va["default"]=Ea}}]);}).call(this || window)
